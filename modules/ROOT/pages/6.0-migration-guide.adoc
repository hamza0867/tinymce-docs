= TinyMCE 5.x -> 6.0 Migration Guide

== Things we renamed

The xref:6.0-release-notes.adoc#things-we-renamed[_{productname} 6.0 Release Notes_] includes a table of every re-named API, Function, Command, Option, and User Interface element.

The table also includes notes regarding what, if any, actions are necessary consequent to upgrading. 

== Plugins

=== ImageTools

As noted in the xref:6.0-release-notes.adoc#removed-or-deprecated-plugins-imagetools[_{productname} 6.0 Release Notes_], the `imagetools` plugin is no longer included as part of the Core open source editor.

_ImageTools_ is now _EditImage_, a https://tiny.cloud/tinymce/features/#productivity[Premium plugin] that offers real-time updates of image as they are edited.

`editimage` also offers two new options:

1. `editimage_proxy_service_url` and

2. `export_image_proxy_service_url`.

These new options provide access to Tiny-specific services.
  
NOTE: `editimage_proxy` (the re-named equivalent to the previous `imagetools_proxy`) still works. It is the fallback option should the Tiny-specific services not be available.

Users of the Free version of {productname} 5.x who rely on the, now deprecated and removed, `imagetools` plugin, should not upgrade to {productname} 6.0 without also installing https://tiny.cloud/tinymce/features/#productivity[_EditImage_].

=== Media

As noted in the xref:6.0-release-notes.adoc#changed-plugins-media[_{productname} 6.0 Release Notes_], the `media` plugin no longer uses the SaxParser.

As a consequence the `iframe`, `video`, `audio`, and `object` elements are no longer marked as _special_, and cannot be marked as such. Put another way, the DomParser does not preserve embedded content.

Instead these elements, and their contents, are validated against the {productname} schema.

This validation is generally done by the `valid_elements`, `valid_children` or `extended_valid_elements` config.

The schema must, therefore, be configured to allow usage of the media elements, and the media element attributes.

NOTE: as of this release, there are no known cases of this change causing media objects to not work as expected. But, also as of this release, not every potential or possible use-case has been tested.

[id=plugins-paste]
=== Paste

As noted in the xref:6.0-release-notes.adoc#removed-or-deprecated-plugins-paste[_{productname} 6.0 Release Notes_], the `paste` plugin’s functionality is no longer provided as a plugin. It is now a core part of {productname} 6.0.

In conjunction with this change, two changes have been made:

1. A `paste` default has changed. The `paste_data_images` option now defaults to `true`.

   When `paste` was a plugin, this option was, by default, set to `false`, which prevented images being pasted from the local machine.

2. The, now built-in, `paste` functionality no longer supports pasting from Microsoft Word.

   There is an open https://github.com/tinymce/tinymce/discussions/7487[request for maintainers] should someone in the community be interested in taking over maintainance of this particular functionality as a separate plugin.

   If a community-maintained version of the `paste` plugin becomes available, we will link to it from here.

NOTE: the Premium plugin, https://tiny.cloud/tinymce/features/powerpaste[`PowerPaste`], is available. It provides the capability to accept data from Microsoft Word and Microsoft Excel, and clean-up the received data before pasting it into place.

=== Table of Contents

As noted in the xref:6.0-release-notes.adoc#new-and-improved-plugins-table-of-contents[_{productname} 6.0 Release Notes_], the `toc` plugin is no longer part of the Core open source editor.

Table of Contents has been updated and is now a https://tiny.cloud/tinymce/features/#productivity[Premium plugin].

Users of the Free version of {productname} 5.x who rely on the, now deprecated and removed, `toc` plugin, should not upgrade to {productname} 6.0 without also installing https://tiny.cloud/tinymce/features/#productivity[_Table of Contents_].


=== Text Patterns

As noted in the xref:6.0-release-notes.adoc#removed-or-deprecated-plugins-text-pattern[_{productname} 6.0 Release Notes_], the `textpattern_patterns` plugin:

* was renamed to `text_patterns`;

* and had its functionality moved to the Core of {productname} 6.0.

As well, the `textpattern` API has been removed.

Finally, and unlike in previous versions of {productname}, text patterns are now on by default. `text_patterns: false` or `text_patterns: []` turns the functionality off.

After upgrading:

* rename any options in your {productname} init configuration to match the new name. 

* remove `textpattern` from your plugins list.


// everything below here needs to be put into the structure above, once said structure is put into place.

== Tables

{productname} previously used `float` to position tables to the left or right of the viewport (the working area available to the {productname} editor). This caused multiple layout and UX problems.

For example, consider a {productname} document that included a table that took up less than 100% of the viewport and a paragraph of text below that table. If both the table and the paragraph were selected and their *alignment* was changed to _left_ or _right_, the paragraph of text moved up beside the table.

As another example, consider a {productname} document containing a table that is wider than the viewport. If you selected this table’s contents and set the *alignment* to _right_, the portion of the table that was outside the viewport disappeared to the left, and no scrollbar presented allowing you to bring that portion back into view.

As of {productname} 6.0, tables are positioned using `margins` rather than `float`. This prevents these layout and UX problems occuring.

However, when upgrading to {productname} 6.0, there are two things to be aware of:

1. {productname} 6.0 does not alter existing documents. Extant
   {productname} documents with tables that were aligned to either
   _left_ or _right_ will still have the `float` property assigned
   when opened and edited unless and until their *alignment* is
   altered.

   If an extant {productname} document with an aligned table is opened
   using {productname} 6.0 and the *alignment* of the table is re-set,
   {productname} 6.0 will remove the `float` property and use the
   `margin` property to set the *alignment*.

2. If the old behaviour is required, a custom format will need to be
   created.



